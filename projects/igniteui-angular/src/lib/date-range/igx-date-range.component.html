<div #toggle="toggle" igxToggle [style.width]="'600px'" (onOpening)="handleOpening($event)" (onClosing)="handleClosing($event)"
    class="igx-date-picker" [class.igx-date-picker--dropdown]="mode === 'dropdown'">
    <!-- TODO: create dynamic with overlay service api, move to separate component -->
    <igx-calendar #calendar (keydown)="onKeyDown($event)" selection="range" [weekStart]="weekStart"
        [hideOutsideDays]="hideOutsideDays" [monthsViewNumber]="monthsViewNumber" [locale]="locale"
        (onSelection)="handleSelection($event)"></igx-calendar>
    <div class="igx-date-range-buttons">
        <ng-container *ngIf="mode === 'dialog'">
            <button igxButton type="button" (click)="close()">{{ doneButtonText }}</button>
        </ng-container>
    </div>
</div>

<ng-container *ngTemplateOutlet="this.hasProjectedInputs ? startEndTemplate : defTemplate"></ng-container>

<ng-template #singleTemplate>
    <div (click)="open()" class="content-wrap">
        <ng-content select="igx-date-single"></ng-content>
    </div>
</ng-template>

<ng-template #suffixTemplate>
    <ng-content select="igx-suffix,[igxSuffix]"></ng-content>
</ng-template>

<ng-template #prefixTemplate>
    <ng-content select="igx-prefix,[igxPrefix]"></ng-content>
</ng-template>

<ng-template #hintTemplate>
    <ng-content select="igx-hint,[igxHint]"></ng-content>
</ng-template>

<ng-template #labelTemplate>
    <ng-content select="[igxLabel]"></ng-content>
</ng-template>

<ng-template #defPrefix>
    <ng-container ngProjectAs="igx-prefix">
        <igx-prefix (click)="open()">
            <igx-icon>
                calendar_today
            </igx-icon>
        </igx-prefix>
    </ng-container>
</ng-template>

<ng-template #startEndTemplate>
    <ng-content select="igx-date-start"></ng-content>
    <div class="igx-date-range__label">
        <ng-container *ngTemplateOutlet="dateSeparatorTemplate ? dateSeparatorTemplate : defDateSeparatorTemplate;"></ng-container>
    </div>
    <ng-content select="igx-date-end"></ng-content>
</ng-template>

<ng-template #defIcon>
    <igx-icon>
        calendar_today
    </igx-icon>
</ng-template>

<ng-template #defDateSeparatorTemplate>{{ dateSeparator }}</ng-template>

<ng-template #defTemplate>
    <igx-input-group (click)="open()">
        <input #singleInput igxInput type="text" readonly
            [placeholder]="this.value ? '' : appliedFormat"
            role="combobox"
            aria-haspopup="grid"
            [attr.aria-expanded]="!toggle.collapsed"
            [attr.aria-labelledby]="this.label?.id"
            [value]="this.value | dateRange: this.inputFormat : this.locale"
            />

        <igx-prefix *ngIf="!this.toggleComponents.length">
            <ng-container *ngTemplateOutlet="defIcon"></ng-container>
        </igx-prefix>

        <ng-container ngProjectAs="[igxLabel]">
            <ng-container *ngTemplateOutlet="labelTemplate"></ng-container>
        </ng-container>
        <ng-container ngProjectAs="igx-prefix">
            <ng-container *ngTemplateOutlet="prefixTemplate"></ng-container>
        </ng-container>
        <ng-container ngProjectAs="igx-suffix">
            <ng-container *ngTemplateOutlet="suffixTemplate"></ng-container>
        </ng-container>
        <ng-container ngProjectAs="igx-hint">
            <ng-container *ngTemplateOutlet="hintTemplate"></ng-container>
        </ng-container>
    </igx-input-group>
</ng-template>
